<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      lang="en-AU">
<xi:include href="_commonwrapper.xml" />

<?python
author = node
?>

<head>
    <title>${author['foaf:name']}</title>
</head>

<body>

<h2>${author['foaf:name']}</h2>

<h3>Articles</h3>
<ul>
    <li py:for="article in sorted(author.reflexive('dc:creator', type='mhs:Article'), key=lambda a: a['dc:isPartOf']['mhs:publicationDate'], reverse=True)">
        <a href="${article.uri}">${article['dc:title']}</a>
    </li>
</ul>

<h3>Reviews</h3>
<ul>
    <li py:for="review in sorted(author.reflexive('dc:creator', type='mhs:Review'), key=lambda r: r['dc:isPartOf']['mhs:publicationDate'], reverse=True)"
        py:with="book = review['mhs:reviews']">
        <a href="${review['dc:isPartOf'].uri}">Review</a> of <em>${book['dc:title']}</em> by ${', '.join(book['dc:creator'])}
    </li>
</ul>

</body>
</html>
