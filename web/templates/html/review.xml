<?xml version="1.0" encoding="UTF-8" ?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      lang="en-AU">
<xi:include href="_commonwrapper.xml" />
<xi:include href="_bookinfo.xml" />

<?python
from viewutils import relative_url
import representations
review = node
book = review['mhs:reviews']
issue = review['dc:isPartOf']
journal = issue['mhs:isIssueOf']
?>

<head>
    <title>Review of ${Markup(book['dc:title']).striptags()} - ${journal['dc:title']} Vol. ${issue['mhs:volume']}, Issue ${issue['mhs:issueNumber']}</title>
    <py:for each="r in representations.for_types(node.types)" py:if="r.format != 'html'">
        ${r(req, node).link()}
    </py:for>
    <link rel="stylesheet" type="text/css" href="/style/review.css" />
</head>

<body>

${breadcrumbs([('/journals/', 'Journals'), 
               (relative_url(journal.uri), journal['dc:title']),
               (relative_url(issue.uri), 'Vol. %s, Issue %s' % (issue['mhs:volume'], issue['mhs:issueNumber']))])}

<h2>Book review<abbr class="unapi-id" title="${review.uri}" /></h2>

<div class="metabox-container">
    <div class="review-meta metabox">
        <h4>Review details</h4>
        <p>Published in <a href="${relative_url(issue.uri)}">Vol. ${issue['mhs:volume']}, Issue ${issue['mhs:issueNumber']}</a> of<br /><a href="${relative_url(journal.uri)}"><em>${journal['dc:title']}</em></a></p>
        <p><a href="${relative_url(review.uri)}.pdf">Original print version</a></p>
        <p class="metadata-links">Metadata:
            ${Markup(u', ').join(r(req, node).anchor() for r in representations.for_types(node.types) if r.format != 'html')}
        </p>
    </div>
</div>

<p py:with="author = review['dc:creator']">
    by <a href="${relative_url(author.uri)}">${author['foaf:name']}</a>
</p>

${bookinfo(book)}

<xi:include href="../../../../content${relative_url(review.uri)}.html"><xi:fallback /></xi:include>

</body>
</html>
